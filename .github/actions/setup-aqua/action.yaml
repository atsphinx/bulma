---
name: "Setup aqua using cache."

inputs:
  aqua_config_path:
    description: "Relative path of aqua configuration file for repository root"
    required: false
    default: "./aqua.yaml"
  aqua_version:
    description: "Using aqua version"
    required: false
    default: "v2.55.0"

runs:
  using: "composite"
  steps:
    - uses: actions/cache@0057852bfaa89a56745cba8c7296529d2fc39830 # v4.3.0
      with:
        path: "~/.local/share/aquaproj-aqua"
        key: "v2-aqua-installer-${{ runner.os }}-${{ runner.arch }}-${{ hashFiles(inputs.aqua_config_path) }}"
        restore-keys: |
          v2-aqua-installer-${{runner.os}}-${{runner.arch}}-
    - uses: "aquaproj/aqua-installer@7a03e85eabde57a080eb043b29a37896f9303fed"
      with:
        aqua_version: "${{ inputs.aqua_version }}"
      env:
        AQUA_CONFIG: "${{ inputs.aqua_config_path }}"
